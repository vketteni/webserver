server {
    listen 8081;
    server_name test.com;
    root /home/hwiemann/Core/webserv/webserv/www;

    # Location für `/`, erlaubt nur GET-Anfragen
    location / {
        root /home/hwiemann/Core/webserv/webserv/www;  # Bediene Anfragen aus dem angegebenen Verzeichnis
        limit_except GET {
            deny all;  # Verweigere alle Methoden außer GET
        }
    }

    # Location für `/put_test/*`, behandelt nur PUT-Anfragen
    location /put_test/ {
        root /path/to/put_test_directory;  # Verzeichnis angeben, in dem die Dateien gespeichert werden
        limit_except PUT {
            deny all;  # Verweigere alle Methoden außer PUT
        }

        # Datei-Uploads aktivieren (stelle sicher, dass die Berechtigungen korrekt sind)
        client_body_temp_path /path/to/temp;
        client_body_in_file_only on;
        client_max_body_size 10M;  # Anpassen je nach Bedarf
    }

    # Location für `.bla`-Dateien, behandelt nur POST-Anfragen und führt CGI-Skript aus
    location ~ \.bla$ {
        limit_except POST {
            deny all;  # Erlaube nur POST-Anfragen
        }

        # Führe das cgi_test-Programm für .bla-Dateien aus
        fastcgi_pass unix:/var/run/cgi_test.sock;  # Pfad zur Socket-Datei anpassen
        fastcgi_param SCRIPT_FILENAME /path/to/cgi_test;  # Pfad zum cgi_test-Skript angeben
    }

    # Location für `/post_body`, behandelt POST mit max. 100 Bytes
    location /post_body {
        limit_except POST {
            deny all;
        }
        client_max_body_size 100;  # Setze max. POST-Body-Größe auf 100 Bytes
    }

    # Location für `/directory/`, bedient Dateien aus `YoupiBanane`
    location /directory/ {
        root /path/to/YoupiBanane;  # Setze Root auf das YoupiBanane-Verzeichnis
        autoindex on;  # Optional: Aktiviert die Verzeichnisauflistung, falls gewünscht

        # Wenn keine Datei angefordert wird, suche nach `youpi.bad_extension`
        try_files $uri /youpi.bad_extension =404;
    }
}

